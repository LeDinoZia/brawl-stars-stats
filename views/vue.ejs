<%- include('header.html') %>

    <body>

        <% if(data !=null) { %>

            <!------------------------------- Stat joueur  ---------------------------------->

            <div class="container">
                <h1>Données de <%=data.name%>
                </h1>
                <h3>(<%=data.tag%>)</h3>
                <div class="character-container">
                    <div class="character">
                        <h3> TROPHEES : <%=data.trophies%>
                                </p>
                                <p> PLUS HAUT TROPHEES : <%=data.highestTrophies%>
                                </p>
                                <p> 3vs3 victoire : <%=data['3vs3Victories']%>
                                </p>
                                <p> Solo Showdown top1 : <%=data.soloVictories%>
                                </p>
                                <p> Duo Showdown top1 : <%=data.duoVictories%>
                        </h3>
                    </div>
                </div>
            </div>


            <!-------------------------------------- Graphique  ----------------------->

           <div class="container">
                <canvas id="ChartTemp" width="3000" height="500"></canvas>

                <script>
                    // Récupération du canvas
                    var ctxTemp = document.getElementById('ChartTemp').getContext('2d');



                    // Données du graphique
                    var dataTemp = {
                        labels: [<%=days%>],
                        datasets: [{
                            label: 'Mois TR',
                            data: [<%=values%>],
                            backgroundColor: [
                                'rgba(229, 13, 236, 0.5)',
                            ],
                            borderColor: [
                                'rgba(255, 99, 132, 1)',
                            ],
                            borderWidth: 1
                        }],
                    };

                    // Options du graphique
                    var optionsTemp = {
                        scales: {
                            y: {
                                suggestedMax: 40,
                                ticks: {
                                    beginAtZero: true,
                                    font: {
                                        size: 18
                                    }
                                }
                            },
                            x: {
                                ticks: {
                                    font: {
                                        size: 18
                                    }
                                },
                                type: 'time',
                            }
                        }
                    };

                    // Création du graphique
                    var myChartTemp = new Chart(ctxTemp, {
                        type: 'line',
                        data: dataTemp,
                        options: optionsTemp
                    });
                </script>
            </div>


            <!------------------------------- Brawler affichage  ---------------------------------->


            <div class="container">
                <h2>Brawlers:</h2>

                <form action="/<%= playerName %>" method="get">
                    <label>
                        <input type="radio" name="filter" value="trophies" checked>
                        Trier par Trophées
                    </label>
                    <label>
                        <input type="radio" name="filter" value="highestTrophies">
                        Trier par Meilleurs Trophées
                    </label>
                    <button type="submit">Filtrer</button>
                </form>

                <div class="brawlers-container">
                    <% data.brawlers.forEach(function(brawler) { %>
                        <div class="brawler">
                            <img class="brawler img" src="/src/<%= brawler.id %>.png" alt="<%= brawler.name %> Image">
                            <div class="brawler-details">
                                <h4>
                                    <%= brawler.name %>
                                </h4>
                                <p>Trophées actuels: <%= brawler.trophies %>
                                </p>
                                <p>Trophées les plus élevés: <%= brawler.highestTrophies %>
                                </p>
                                <p>Power: <%= brawler.power %>
                                </p>
                            </div>
                        </div>
                        <% }); %>
                </div>
            </div>

            <!------------------------------- Brawler affichage  ---------------------------------->


            <% } else { %>
                <div class="container">
                    <h1>Erreur lors de la récupération des données. Veuillez réessayer plus tard.</h1>
                </div>
                <% } %>

    </body>

    </html